     1                                 %line 1+1 show.asm
     2                                 
     3                                 
     4                                 
     5                                 [global progr]
     6                                 [extern exit]
     7                                 
     8                                 
     9                                 [global SHOW]
    10                                 
    11                                 [extern IFORM]
    12                                 [extern CAT2]
    13                                 [extern WRITE]
    14                                 
    15                                 [extern OUTCH]
    16                                 
    17                                 [section .data]
    18                                 BUFFER:
    19 00000000 00000000<rept>          times 32 dd 0
    20                                 
    21                                 
    22                                 [section .text]
    23                                 
    24                                 SHOW:
    25 00000000 55                      push EBP
    26 00000001 89E5                    mov EBP,ESP
    27                                 
    28                                 
    29                                 
    30                                 
    31                                 
    32                                 
    33 00000003 B80A000000              mov EAX,10
    34 00000008 A3[00000000]            mov [BUFFER],EAX
    35                                 
    36                                 
    37 0000000D 8B5D08                  mov EBX,[EBP+8]
    38                                 
    39                                 
    40 00000010 53                      push EBX
    41 00000011 68[00000000]            push BUFFER
    42 00000016 E8(F6FFFFFF)            call IFORM
    43 0000001B 83C408                  add ESP,4*2
    44                                 
    45                                 
    46 0000001E A1[00000000]            mov EAX,[BUFFER]
    47 00000023 40                      inc EAX
    48 00000024 A3[00000000]            mov [BUFFER],EAX
    49                                 
    50                                 
    51 00000029 A1[00000000]            mov EAX,[BUFFER]
    52 0000002E C1E002                  sal EAX,2
    53 00000031 05[00000000]            add EAX,BUFFER
    54 00000036 A3[00000000]            mov [T1Z],EAX
    55 0000003B B820000000              mov EAX,32
    56 00000040 89C2                    mov EDX,EAX
    57 00000042 A1[00000000]            mov EAX,[T1Z]
    58 00000047 8910                    mov [EAX],EDX
    59                                 
    60                                 
    61 00000049 8B5D0C                  mov EBX,[EBP+12]
    62                                 
    63 0000004C 68[00000000]            push BUFFER
    64                                 
    65 00000051 53                      push EBX
    66 00000052 E8(F6FFFFFF)            call CAT2
    67 00000057 83C408                  add ESP,4*2
    68                                 
    69                                 
    70 0000005A 68[00000000]            push OUTCH
    71 0000005F 68[00000000]            push BUFFER
    72 00000064 E8(F6FFFFFF)            call WRITE
    73 00000069 83C408                  add ESP,4*2
    74                                 
    75                                 
    76 0000006C 89EC                    mov ESP,EBP
    77 0000006E 5D                      pop EBP
    78 0000006F C3                      ret
    79                                 
    80                                 [section .data]
    81                                 T1Z:
    82 00000080 00000000<rept>          times 2 dd 0
    83                                 [section .text]
    84                                 
    85                                  end
