     1                                 %line 1+1 testeval.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 [global TESTEVAL]
    12                                 
    13                                 [global progr]
    14                                 [extern exit]
    15                                 
    16                                 [global TESTEVAL]
    17                                 [section .text]
    18                                 progr:
    19 00000000 55                      push EBP
    20 00000001 89E5                    mov EBP,ESP
    21 00000003 EBFE                    jmp TESTEVAL
    22                                 
    23                                 [global EVALS]
    24                                 
    25                                 
    26                                 [extern READ]
    27                                 [extern WRITE]
    28                                 
    29                                 [extern LEX]
    30                                 [extern CAT2]
    31                                 
    32                                 [extern SCAN]
    33                                 [extern INITSYM]
    34                                 [extern DMPLIST]
    35                                 [extern SHOTOKS]
    36                                 
    37                                 [extern EVAL]
    38                                 [extern IFORM]
    39                                 [extern CAT2]
    40                                 
    41                                 [extern OUTCH]
    42                                 
    43                                 [extern TOKENS]
    44                                 
    45                                 
    46                                 [section .data]
    47                                 GREET:
    48 00000000 15000000                dd 21
    49 00000004 42000000                dd 66
    50 00000008 65000000                dd 101
    51 0000000C 67000000                dd 103
    52 00000010 69000000                dd 105
    53 00000014 6E000000                dd 110
    54 00000018 20000000                dd 32
    55 0000001C 53000000                dd 83
    56 00000020 6D000000                dd 109
    57 00000024 61000000                dd 97
    58 00000028 6C000000                dd 108
    59 0000002C 6C000000                dd 108
    60 00000030 20000000                dd 32
    61 00000034 65000000                dd 101
    62 00000038 76000000                dd 118
    63 0000003C 61000000                dd 97
    64 00000040 6C000000                dd 108
    65 00000044 20000000                dd 32
    66 00000048 54000000                dd 84
    67 0000004C 65000000                dd 101
    68 00000050 73000000                dd 115
    69 00000054 74000000                dd 116
    70                                 
    71                                 DONE:
    72 00000058 18000000                dd 24
    73 0000005C 41000000                dd 65
    74 00000060 4E000000                dd 78
    75 00000064 53000000                dd 83
    76 00000068 57000000                dd 87
    77 0000006C 45000000                dd 69
    78 00000070 52000000                dd 82
    79 00000074 20000000                dd 32
    80 00000078 3D000000                dd 61
    81 0000007C 20000000                dd 32
    82 00000080 20000000                dd 32
    83 00000084 20000000                dd 32
    84 00000088 20000000                dd 32
    85 0000008C 20000000                dd 32
    86 00000090 20000000                dd 32
    87 00000094 20000000                dd 32
    88 00000098 20000000                dd 32
    89 0000009C 20000000                dd 32
    90 000000A0 20000000                dd 32
    91 000000A4 20000000                dd 32
    92 000000A8 20000000                dd 32
    93 000000AC 20000000                dd 32
    94 000000B0 20000000                dd 32
    95 000000B4 20000000                dd 32
    96 000000B8 20000000                dd 32
    97                                 
    98                                 IT:
    99 000000BC 00000000                times 1 dd 0
   100                                 ANSWER:
   101 000000C0 00000000                times 1 dd 0
   102                                 
   103                                 LA:
   104 000000C4 00000000                times 1 dd 0
   105                                 TMP:
   106 000000C8 00000000<rept>          times 12 dd 0
   107                                 
   108                                 
   109                                 [section .text]
   110                                 TESTEVAL:
   111                                 
   112                                 
   113 00000005 68[00000000]            push OUTCH
   114 0000000A 68[00000000]            push GREET
   115 0000000F E8(F6FFFFFF)            call WRITE
   116 00000014 83C408                  add ESP,4*2
   117                                 
   118                                 
   119 00000017 E8(F6FFFFFF)            call INITSYM
   120                                 
   121                                 
   122                                 
   123 0000001C E8(F6FFFFFF)            call SCAN
   124                                 
   125                                 
   126 00000021 89EC                    mov ESP,EBP
   127 00000023 5D                      pop EBP
   128 00000024 C3                      ret
   129                                 
   130                                 
   131                                 
   132                                 
   133                                 EVALS:
   134 00000025 55                      push EBP
   135 00000026 89E5                    mov EBP,ESP
   136                                 
   137                                 
   138                                 
   139                                 
   140                                 
   141                                 
   142 00000028 8B5D08                  mov EBX,[EBP+8]
   143 0000002B 8B03                    mov EAX,[EBX]
   144 0000002D A3[00000000]            mov [IT],EAX
   145                                 
   146                                 
   147                                 
   148 00000032 68[00000000]            push IT
   149 00000037 E8(F6FFFFFF)            call EVAL
   150 0000003C 83C404                  add ESP,4*1
   151 0000003F A3[00000000]            mov [ANSWER],EAX
   152                                 
   153                                 
   154 00000044 B80A000000              mov EAX,10
   155 00000049 A3[00000000]            mov [TMP],EAX
   156                                 
   157                                 
   158 0000004E 68[00000000]            push ANSWER
   159 00000053 68[00000000]            push TMP
   160 00000058 E8(F6FFFFFF)            call IFORM
   161 0000005D 83C408                  add ESP,4*2
   162                                 
   163                                 
   164 00000060 B80A000000              mov EAX,10
   165 00000065 A3[00000000]            mov [DONE],EAX
   166                                 
   167                                 
   168 0000006A 68[00000000]            push DONE
   169 0000006F 68[00000000]            push TMP
   170 00000074 E8(F6FFFFFF)            call CAT2
   171 00000079 83C408                  add ESP,4*2
   172                                 
   173                                 
   174 0000007C 68[00000000]            push OUTCH
   175 00000081 68[00000000]            push DONE
   176 00000086 E8(F6FFFFFF)            call WRITE
   177 0000008B 83C408                  add ESP,4*2
   178                                 
   179                                 
   180 0000008E A1[00000000]            mov EAX,[ANSWER]
   181                                 
   182 00000093 89EC                    mov ESP,EBP
   183 00000095 5D                      pop EBP
   184 00000096 C3                      ret
   185                                 
   186                                 
   187                                 
   188                                  end
