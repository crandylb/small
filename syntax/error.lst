     1                                 %line 1+1 error.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 [global progr]
     9                                 [extern exit]
    10                                 
    11                                 
    12                                 [global ERROR]
    13                                 
    14                                 [global ERRCNT]
    15                                 
    16                                 
    17                                 [extern WRITE]
    18                                 [extern IFORM]
    19                                 [extern CAT2]
    20                                 [extern CAT3]
    21                                 
    22                                 [extern OUTCH]
    23                                 
    24                                 [extern TOKENS]
    25                                 
    26                                 
    27                                 [section .data]
    28                                 ERRCNT:
    29 00000000 00000000                dd 0
    30                                 
    31                                 ERRPTR:
    32 00000004 40000000                dd 64
    33 00000008 2D000000                dd 45
    34 0000000C 2D000000                dd 45
    35 00000010 2D000000                dd 45
    36 00000014 2D000000                dd 45
    37 00000018 2D000000                dd 45
    38 0000001C 2D000000                dd 45
    39 00000020 2D000000                dd 45
    40 00000024 2D000000                dd 45
    41 00000028 2D000000                dd 45
    42 0000002C 2D000000                dd 45
    43 00000030 2D000000                dd 45
    44 00000034 2D000000                dd 45
    45 00000038 2D000000                dd 45
    46 0000003C 2D000000                dd 45
    47 00000040 2D000000                dd 45
    48 00000044 2D000000                dd 45
    49 00000048 2D000000                dd 45
    50 0000004C 2D000000                dd 45
    51 00000050 2D000000                dd 45
    52 00000054 2D000000                dd 45
    53 00000058 2D000000                dd 45
    54 0000005C 2D000000                dd 45
    55 00000060 2D000000                dd 45
    56 00000064 2D000000                dd 45
    57 00000068 2D000000                dd 45
    58 0000006C 2D000000                dd 45
    59 00000070 2D000000                dd 45
    60 00000074 2D000000                dd 45
    61 00000078 2D000000                dd 45
    62 0000007C 2D000000                dd 45
    63 00000080 2D000000                dd 45
    64 00000084 2D000000                dd 45
    65 00000088 2D000000                dd 45
    66 0000008C 2D000000                dd 45
    67 00000090 2D000000                dd 45
    68 00000094 2D000000                dd 45
    69 00000098 2D000000                dd 45
    70 0000009C 2D000000                dd 45
    71 000000A0 2D000000                dd 45
    72 000000A4 2D000000                dd 45
    73 000000A8 2D000000                dd 45
    74 000000AC 2D000000                dd 45
    75 000000B0 2D000000                dd 45
    76 000000B4 2D000000                dd 45
    77 000000B8 2D000000                dd 45
    78 000000BC 2D000000                dd 45
    79 000000C0 2D000000                dd 45
    80 000000C4 2D000000                dd 45
    81 000000C8 2D000000                dd 45
    82 000000CC 2D000000                dd 45
    83 000000D0 2D000000                dd 45
    84 000000D4 2D000000                dd 45
    85 000000D8 2D000000                dd 45
    86 000000DC 2D000000                dd 45
    87 000000E0 2D000000                dd 45
    88 000000E4 2D000000                dd 45
    89 000000E8 2D000000                dd 45
    90 000000EC 2D000000                dd 45
    91 000000F0 2D000000                dd 45
    92 000000F4 2D000000                dd 45
    93 000000F8 2D000000                dd 45
    94 000000FC 2D000000                dd 45
    95 00000100 2D000000                dd 45
    96 00000104 2D000000                dd 45
    97                                 
    98                                 PTR:
    99 00000108 01000000                dd 1
   100 0000010C 5E000000                dd 94
   101                                 
   102                                 TMP:
   103 00000110 00000000<rept>          times 129 dd 0
   104                                 
   105                                 
   106                                 [section .text]
   107                                 
   108                                 ERROR:
   109 00000000 55                      push EBP
   110 00000001 89E5                    mov EBP,ESP
   111                                 
   112                                 
   113                                 
   114                                 
   115                                 
   116                                 
   117 00000003 B800000000              mov EAX,0
   118 00000008 A3[00000000]            mov [TMP],EAX
   119                                 
   120                                 
   121                                 
   122                                 
   123 0000000D 8B5D0C                  mov EBX,[EBP+12]
   124 00000010 8B03                    mov EAX,[EBX]
   125 00000012 C1E002                  sal EAX,2
   126 00000015 05[00000000]            add EAX,TOKENS
   127 0000001A 8B00                    mov EAX,[EAX]
   128 0000001C 25FF000000              and EAX,255
   129 00000021 48                      dec EAX
   130 00000022 A3[00000000]            mov [ERRPTR],EAX
   131                                 
   132                                 
   133 00000027 68[00000000]            push TMP
   134 0000002C 68[00000000]            push ERRPTR
   135 00000031 E8(F6FFFFFF)            call CAT2
   136 00000036 83C408                  add ESP,4*2
   137                                 
   138                                 
   139 00000039 68[00000000]            push TMP
   140 0000003E 68[00000000]            push PTR
   141 00000043 E8(F6FFFFFF)            call CAT2
   142 00000048 83C408                  add ESP,4*2
   143                                 
   144                                 
   145 0000004B 8B5D08                  mov EBX,[EBP+8]
   146                                 
   147 0000004E 68[00000000]            push TMP
   148                                 
   149 00000053 53                      push EBX
   150 00000054 E8(F6FFFFFF)            call CAT2
   151 00000059 83C408                  add ESP,4*2
   152                                 
   153                                 
   154 0000005C 68[00000000]            push OUTCH
   155 00000061 68[00000000]            push TMP
   156 00000066 E8(F6FFFFFF)            call WRITE
   157 0000006B 83C408                  add ESP,4*2
   158                                 
   159                                 
   160 0000006E 89EC                    mov ESP,EBP
   161 00000070 5D                      pop EBP
   162 00000071 C3                      ret
   163                                 
   164                                 
   165                                  end
