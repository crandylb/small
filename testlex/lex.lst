     1                                 %line 1+1 lex.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 [global progr]
     9                                 [extern exit]
    10                                 
    11                                 [global LEX]
    12                                 
    13                                 [extern BUFF]
    14                                 
    15                                 
    16                                 
    17                                 
    18                                 [section .data]
    19                                 T:
    20 00000000 01000000                dd 1
    21 00000004 01000000                dd 1
    22 00000008 01000000                dd 1
    23 0000000C 01000000                dd 1
    24 00000010 01000000                dd 1
    25 00000014 01000000                dd 1
    26 00000018 01000000                dd 1
    27 0000001C 01000000                dd 1
    28 00000020 01000000                dd 1
    29 00000024 01000000                dd 1
    30 00000028 01000000                dd 1
    31 0000002C 01000000                dd 1
    32 00000030 01000000                dd 1
    33 00000034 01000000                dd 1
    34 00000038 01000000                dd 1
    35 0000003C 01000000                dd 1
    36                                 
    37                                 T2:
    38 00000040 01000000                dd 1
    39 00000044 01000000                dd 1
    40 00000048 01000000                dd 1
    41 0000004C 01000000                dd 1
    42 00000050 01000000                dd 1
    43 00000054 01000000                dd 1
    44 00000058 01000000                dd 1
    45 0000005C 01000000                dd 1
    46 00000060 01000000                dd 1
    47 00000064 01000000                dd 1
    48 00000068 01000000                dd 1
    49 0000006C 01000000                dd 1
    50 00000070 01000000                dd 1
    51 00000074 01000000                dd 1
    52 00000078 01000000                dd 1
    53 0000007C 01000000                dd 1
    54                                 
    55                                 T3:
    56 00000080 01000000                dd 1
    57 00000084 05000000                dd 5
    58 00000088 05000000                dd 5
    59 0000008C 05000000                dd 5
    60 00000090 05000000                dd 5
    61 00000094 05000000                dd 5
    62 00000098 05000000                dd 5
    63 0000009C 04000000                dd 4
    64 000000A0 05000000                dd 5
    65 000000A4 05000000                dd 5
    66 000000A8 05000000                dd 5
    67 000000AC 05000000                dd 5
    68 000000B0 05000000                dd 5
    69 000000B4 05000000                dd 5
    70 000000B8 05000000                dd 5
    71 000000BC 05000000                dd 5
    72                                 
    73                                 T4:
    74 000000C0 03000000                dd 3
    75 000000C4 03000000                dd 3
    76 000000C8 03000000                dd 3
    77 000000CC 03000000                dd 3
    78 000000D0 03000000                dd 3
    79 000000D4 03000000                dd 3
    80 000000D8 03000000                dd 3
    81 000000DC 03000000                dd 3
    82 000000E0 03000000                dd 3
    83 000000E4 03000000                dd 3
    84 000000E8 05000000                dd 5
    85 000000EC 05000000                dd 5
    86 000000F0 05000000                dd 5
    87 000000F4 05000000                dd 5
    88 000000F8 05000000                dd 5
    89 000000FC 05000000                dd 5
    90                                 
    91                                 T5:
    92 00000100 05000000                dd 5
    93 00000104 02000000                dd 2
    94 00000108 02000000                dd 2
    95 0000010C 02000000                dd 2
    96 00000110 02000000                dd 2
    97 00000114 02000000                dd 2
    98 00000118 02000000                dd 2
    99 0000011C 02000000                dd 2
   100 00000120 02000000                dd 2
   101 00000124 02000000                dd 2
   102 00000128 02000000                dd 2
   103 0000012C 02000000                dd 2
   104 00000130 02000000                dd 2
   105 00000134 02000000                dd 2
   106 00000138 02000000                dd 2
   107 0000013C 02000000                dd 2
   108                                 
   109                                 T6:
   110 00000140 02000000                dd 2
   111 00000144 02000000                dd 2
   112 00000148 02000000                dd 2
   113 0000014C 02000000                dd 2
   114 00000150 02000000                dd 2
   115 00000154 02000000                dd 2
   116 00000158 02000000                dd 2
   117 0000015C 02000000                dd 2
   118 00000160 02000000                dd 2
   119 00000164 02000000                dd 2
   120 00000168 02000000                dd 2
   121 0000016C 05000000                dd 5
   122 00000170 05000000                dd 5
   123 00000174 05000000                dd 5
   124 00000178 05000000                dd 5
   125 0000017C 05000000                dd 5
   126                                 
   127                                 T7:
   128 00000180 05000000                dd 5
   129 00000184 02000000                dd 2
   130 00000188 02000000                dd 2
   131 0000018C 02000000                dd 2
   132 00000190 02000000                dd 2
   133 00000194 02000000                dd 2
   134 00000198 02000000                dd 2
   135 0000019C 02000000                dd 2
   136 000001A0 02000000                dd 2
   137 000001A4 02000000                dd 2
   138 000001A8 02000000                dd 2
   139 000001AC 02000000                dd 2
   140 000001B0 02000000                dd 2
   141 000001B4 02000000                dd 2
   142 000001B8 02000000                dd 2
   143 000001BC 02000000                dd 2
   144                                 
   145                                 T8:
   146 000001C0 02000000                dd 2
   147 000001C4 02000000                dd 2
   148 000001C8 02000000                dd 2
   149 000001CC 02000000                dd 2
   150 000001D0 02000000                dd 2
   151 000001D4 02000000                dd 2
   152 000001D8 02000000                dd 2
   153 000001DC 02000000                dd 2
   154 000001E0 02000000                dd 2
   155 000001E4 02000000                dd 2
   156 000001E8 02000000                dd 2
   157 000001EC 05000000                dd 5
   158 000001F0 05000000                dd 5
   159 000001F4 05000000                dd 5
   160 000001F8 05000000                dd 5
   161 000001FC 05000000                dd 5
   162                                 
   163                                 
   164                                 S:
   165 00000200 1E000000                dd 30
   166                                 
   167                                 S1:
   168 00000204 01000000                dd 1
   169 00000208 02000000                dd 2
   170 0000020C 03000000                dd 3
   171 00000210 04000000                dd 4
   172 00000214 06000000                dd 6
   173                                 
   174                                 S2:
   175 00000218 FFFFFFFF                dd -1
   176 0000021C 02000000                dd 2
   177 00000220 02000000                dd 2
   178 00000224 FFFFFFFF                dd -1
   179 00000228 FFFFFFFF                dd -1
   180                                 
   181                                 S3:
   182 0000022C FEFFFFFF                dd -2
   183 00000230 FEFFFFFF                dd -2
   184 00000234 03000000                dd 3
   185 00000238 FEFFFFFF                dd -2
   186 0000023C FEFFFFFF                dd -2
   187                                 
   188                                 S4:
   189 00000240 04000000                dd 4
   190 00000244 04000000                dd 4
   191 00000248 04000000                dd 4
   192 0000024C 05000000                dd 5
   193 00000250 04000000                dd 4
   194                                 
   195                                 S5:
   196 00000254 FDFFFFFF                dd -3
   197 00000258 FDFFFFFF                dd -3
   198 0000025C FDFFFFFF                dd -3
   199 00000260 04000000                dd 4
   200 00000264 FDFFFFFF                dd -3
   201                                 
   202                                 S6:
   203 00000268 FCFFFFFF                dd -4
   204 0000026C FCFFFFFF                dd -4
   205 00000270 FCFFFFFF                dd -4
   206 00000274 FCFFFFFF                dd -4
   207 00000278 FCFFFFFF                dd -4
   208                                 
   209                                 SROW:
   210 0000027C 06000000                dd 6
   211 00000280 00000000                dd 0
   212 00000284 05000000                dd 5
   213 00000288 0A000000                dd 10
   214 0000028C 0F000000                dd 15
   215 00000290 14000000                dd 20
   216 00000294 19000000                dd 25
   217                                 
   218                                 
   219                                 CTYPE:
   220 00000298 00000000                times 1 dd 0
   221                                 
   222                                 STATE:
   223 0000029C 00000000                times 1 dd 0
   224                                 
   225                                 KIND:
   226 000002A0 00000000                times 1 dd 0
   227                                 
   228                                 I:
   229 000002A4 00000000                times 1 dd 0
   230                                 
   231                                 CHAR:
   232 000002A8 00000000                times 1 dd 0
   233                                 
   234                                 J:
   235 000002AC 00000000                times 1 dd 0
   236                                 
   237                                 
   238                                 [section .text]
   239                                 
   240                                 LEX:
   241 00000000 55                      push EBP
   242 00000001 89E5                    mov EBP,ESP
   243                                 
   244                                 
   245                                 
   246                                 
   247                                 
   248                                 
   249 00000003 B801000000              mov EAX,1
   250 00000008 A3[00000000]            mov [STATE],EAX
   251                                 
   252                                 
   253                                 
   254 0000000D 8B5D0C                  mov EBX,[EBP+12]
   255 00000010 8B03                    mov EAX,[EBX]
   256 00000012 A3[00000000]            mov [I],EAX
   257                                 
   258                                 
   259 00000017 B801000000              mov EAX,1
   260 0000001C A3[00000000]            mov [J],EAX
   261                                 
   262                                 LJ1:
   263                                 
   264                                 
   265 00000021 A1[00000000]            mov EAX,[I]
   266 00000026 C1E002                  sal EAX,2
   267 00000029 05[00000000]            add EAX,BUFF
   268 0000002E 8B00                    mov EAX,[EAX]
   269 00000030 A3[00000000]            mov [CHAR],EAX
   270                                 
   271                                 
   272 00000035 B801000000              mov EAX,1
   273 0000003A F7D8                    neg EAX
   274 0000003C A3[00000000]            mov [T1Z],EAX
   275 00000041 A1[00000000]            mov EAX,[CHAR]
   276                                 
   277 00000046 2B05[00000000]          sub EAX,[T1Z]
   278 0000004C 750E                    jne LJ3
   279                                 
   280                                 
   281 0000004E A1[00000000]            mov EAX,[J]
   282 00000053 48                      dec EAX
   283                                 
   284 00000054 8B5D08                  mov EBX,[EBP+8]
   285 00000057 8903                    mov [EBX],EAX
   286                                 
   287 00000059 E996000000              jmp LJ2
   288                                 
   289                                 LJ3:
   290                                 
   291                                 
   292 0000005E A1[00000000]            mov EAX,[CHAR]
   293 00000063 C1E002                  sal EAX,2
   294 00000066 05[00000000]            add EAX,T
   295 0000006B 8B00                    mov EAX,[EAX]
   296 0000006D A3[00000000]            mov [CTYPE],EAX
   297                                 
   298                                 
   299 00000072 A1[00000000]            mov EAX,[STATE]
   300 00000077 C1E002                  sal EAX,2
   301 0000007A 05[00000000]            add EAX,SROW
   302 0000007F 8B00                    mov EAX,[EAX]
   303 00000081 0305[00000000]          add EAX,[CTYPE]
   304 00000087 C1E002                  sal EAX,2
   305 0000008A 05[00000000]            add EAX,S
   306 0000008F 8B00                    mov EAX,[EAX]
   307 00000091 A3[00000000]            mov [STATE],EAX
   308                                 
   309                                 
   310 00000096 A1[00000000]            mov EAX,[STATE]
   311 0000009B 09C0                    or EAX,EAX
   312 0000009D 7D0D                    jge LJ4
   313                                 
   314                                 
   315 0000009F A1[00000000]            mov EAX,[J]
   316 000000A4 48                      dec EAX
   317                                 
   318 000000A5 8B5D08                  mov EBX,[EBP+8]
   319 000000A8 8903                    mov [EBX],EAX
   320                                 
   321 000000AA EB4B                    jmp LJ2
   322                                 
   323 000000AC EB31                    jmp LJ5
   324                                 LJ4:
   325                                 
   326                                 
   327 000000AE A1[00000000]            mov EAX,[STATE]
   328 000000B3 48                      dec EAX
   329 000000B4 7429                    jz LJ6
   330                                 
   331                                 
   332 000000B6 A1[00000000]            mov EAX,[J]
   333 000000BB C1E002                  sal EAX,2
   334                                 
   335 000000BE 8B5D08                  mov EBX,[EBP+8]
   336 000000C1 01D8                    add EAX,EBX
   337 000000C3 A3[00000000]            mov [T1Z],EAX
   338 000000C8 A1[00000000]            mov EAX,[CHAR]
   339 000000CD 89C2                    mov EDX,EAX
   340 000000CF A1[00000000]            mov EAX,[T1Z]
   341 000000D4 8910                    mov [EAX],EDX
   342                                 
   343                                 
   344 000000D6 A1[00000000]            mov EAX,[J]
   345 000000DB 40                      inc EAX
   346 000000DC A3[00000000]            mov [J],EAX
   347                                 
   348                                 LJ6:
   349                                 
   350                                 LJ5:
   351                                 
   352                                 
   353 000000E1 A1[00000000]            mov EAX,[I]
   354 000000E6 40                      inc EAX
   355 000000E7 A3[00000000]            mov [I],EAX
   356                                 
   357                                 
   358 000000EC A1[00000000]            mov EAX,[STATE]
   359 000000F1 09C0                    or EAX,EAX
   360 000000F3 0F8D22FFFFFF            jge LJ1
   361                                 LJ2:
   362                                 
   363                                 
   364 000000F9 A1[00000000]            mov EAX,[I]
   365                                 
   366 000000FE 8B5D0C                  mov EBX,[EBP+12]
   367 00000101 8903                    mov [EBX],EAX
   368                                 
   369                                 
   370 00000103 A1[00000000]            mov EAX,[STATE]
   371 00000108 F7D8                    neg EAX
   372 0000010A A3[00000000]            mov [KIND],EAX
   373                                 
   374                                 
   375 0000010F A1[00000000]            mov EAX,[KIND]
   376                                 
   377 00000114 89EC                    mov ESP,EBP
   378 00000116 5D                      pop EBP
   379 00000117 C3                      ret
   380                                 
   381                                 [section .data]
   382                                 T1Z:
   383 000002B0 00000000<rept>          times 2 dd 0
   384                                 [section .text]
   385                                 
   386                                  end
