     1                                 %line 1+1 lex.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 
    12                                 [global progr]
    13                                 [extern exit]
    14                                 
    15                                 [global LEX]
    16                                 
    17                                 [extern BUFF]
    18                                 
    19                                 [extern A2B40L]
    20                                 
    21                                 [extern LOOKS]
    22                                 
    23                                 
    24                                 
    25                                 
    26                                 
    27                                 [section .data]
    28                                 T:
    29 00000000 01000000                dd 1
    30 00000004 01000000                dd 1
    31 00000008 01000000                dd 1
    32 0000000C 01000000                dd 1
    33 00000010 01000000                dd 1
    34 00000014 01000000                dd 1
    35 00000018 01000000                dd 1
    36 0000001C 01000000                dd 1
    37 00000020 01000000                dd 1
    38 00000024 01000000                dd 1
    39 00000028 01000000                dd 1
    40 0000002C 01000000                dd 1
    41 00000030 01000000                dd 1
    42 00000034 01000000                dd 1
    43 00000038 01000000                dd 1
    44 0000003C 01000000                dd 1
    45                                 
    46                                 T2:
    47 00000040 01000000                dd 1
    48 00000044 01000000                dd 1
    49 00000048 01000000                dd 1
    50 0000004C 01000000                dd 1
    51 00000050 01000000                dd 1
    52 00000054 01000000                dd 1
    53 00000058 01000000                dd 1
    54 0000005C 01000000                dd 1
    55 00000060 01000000                dd 1
    56 00000064 01000000                dd 1
    57 00000068 01000000                dd 1
    58 0000006C 01000000                dd 1
    59 00000070 01000000                dd 1
    60 00000074 01000000                dd 1
    61 00000078 01000000                dd 1
    62 0000007C 01000000                dd 1
    63                                 
    64                                 T3:
    65 00000080 01000000                dd 1
    66 00000084 05000000                dd 5
    67 00000088 05000000                dd 5
    68 0000008C 05000000                dd 5
    69 00000090 05000000                dd 5
    70 00000094 05000000                dd 5
    71 00000098 05000000                dd 5
    72 0000009C 04000000                dd 4
    73 000000A0 05000000                dd 5
    74 000000A4 05000000                dd 5
    75 000000A8 05000000                dd 5
    76 000000AC 05000000                dd 5
    77 000000B0 05000000                dd 5
    78 000000B4 05000000                dd 5
    79 000000B8 05000000                dd 5
    80 000000BC 05000000                dd 5
    81                                 
    82                                 T4:
    83 000000C0 03000000                dd 3
    84 000000C4 03000000                dd 3
    85 000000C8 03000000                dd 3
    86 000000CC 03000000                dd 3
    87 000000D0 03000000                dd 3
    88 000000D4 03000000                dd 3
    89 000000D8 03000000                dd 3
    90 000000DC 03000000                dd 3
    91 000000E0 03000000                dd 3
    92 000000E4 03000000                dd 3
    93 000000E8 05000000                dd 5
    94 000000EC 05000000                dd 5
    95 000000F0 05000000                dd 5
    96 000000F4 05000000                dd 5
    97 000000F8 05000000                dd 5
    98 000000FC 05000000                dd 5
    99                                 
   100                                 T5:
   101 00000100 05000000                dd 5
   102 00000104 02000000                dd 2
   103 00000108 02000000                dd 2
   104 0000010C 02000000                dd 2
   105 00000110 02000000                dd 2
   106 00000114 02000000                dd 2
   107 00000118 02000000                dd 2
   108 0000011C 02000000                dd 2
   109 00000120 02000000                dd 2
   110 00000124 02000000                dd 2
   111 00000128 02000000                dd 2
   112 0000012C 02000000                dd 2
   113 00000130 02000000                dd 2
   114 00000134 02000000                dd 2
   115 00000138 02000000                dd 2
   116 0000013C 02000000                dd 2
   117                                 
   118                                 T6:
   119 00000140 02000000                dd 2
   120 00000144 02000000                dd 2
   121 00000148 02000000                dd 2
   122 0000014C 02000000                dd 2
   123 00000150 02000000                dd 2
   124 00000154 02000000                dd 2
   125 00000158 02000000                dd 2
   126 0000015C 02000000                dd 2
   127 00000160 02000000                dd 2
   128 00000164 02000000                dd 2
   129 00000168 02000000                dd 2
   130 0000016C 05000000                dd 5
   131 00000170 05000000                dd 5
   132 00000174 05000000                dd 5
   133 00000178 05000000                dd 5
   134 0000017C 05000000                dd 5
   135                                 
   136                                 T7:
   137 00000180 05000000                dd 5
   138 00000184 02000000                dd 2
   139 00000188 02000000                dd 2
   140 0000018C 02000000                dd 2
   141 00000190 02000000                dd 2
   142 00000194 02000000                dd 2
   143 00000198 02000000                dd 2
   144 0000019C 02000000                dd 2
   145 000001A0 02000000                dd 2
   146 000001A4 02000000                dd 2
   147 000001A8 02000000                dd 2
   148 000001AC 02000000                dd 2
   149 000001B0 02000000                dd 2
   150 000001B4 02000000                dd 2
   151 000001B8 02000000                dd 2
   152 000001BC 02000000                dd 2
   153                                 
   154                                 T8:
   155 000001C0 02000000                dd 2
   156 000001C4 02000000                dd 2
   157 000001C8 02000000                dd 2
   158 000001CC 02000000                dd 2
   159 000001D0 02000000                dd 2
   160 000001D4 02000000                dd 2
   161 000001D8 02000000                dd 2
   162 000001DC 02000000                dd 2
   163 000001E0 02000000                dd 2
   164 000001E4 02000000                dd 2
   165 000001E8 02000000                dd 2
   166 000001EC 05000000                dd 5
   167 000001F0 05000000                dd 5
   168 000001F4 05000000                dd 5
   169 000001F8 05000000                dd 5
   170 000001FC 05000000                dd 5
   171                                 
   172                                 
   173                                 S:
   174 00000200 1E000000                dd 30
   175                                 
   176                                 S1:
   177 00000204 01000000                dd 1
   178 00000208 02000000                dd 2
   179 0000020C 03000000                dd 3
   180 00000210 04000000                dd 4
   181 00000214 06000000                dd 6
   182                                 
   183                                 S2:
   184 00000218 FFFFFFFF                dd -1
   185 0000021C 02000000                dd 2
   186 00000220 02000000                dd 2
   187 00000224 FFFFFFFF                dd -1
   188 00000228 FFFFFFFF                dd -1
   189                                 
   190                                 S3:
   191 0000022C FEFFFFFF                dd -2
   192 00000230 FEFFFFFF                dd -2
   193 00000234 03000000                dd 3
   194 00000238 FEFFFFFF                dd -2
   195 0000023C FEFFFFFF                dd -2
   196                                 
   197                                 S4:
   198 00000240 04000000                dd 4
   199 00000244 04000000                dd 4
   200 00000248 04000000                dd 4
   201 0000024C 05000000                dd 5
   202 00000250 04000000                dd 4
   203                                 
   204                                 S5:
   205 00000254 FDFFFFFF                dd -3
   206 00000258 FDFFFFFF                dd -3
   207 0000025C FDFFFFFF                dd -3
   208 00000260 04000000                dd 4
   209 00000264 FDFFFFFF                dd -3
   210                                 
   211                                 S6:
   212 00000268 FCFFFFFF                dd -4
   213 0000026C FCFFFFFF                dd -4
   214 00000270 FCFFFFFF                dd -4
   215 00000274 FCFFFFFF                dd -4
   216 00000278 FCFFFFFF                dd -4
   217                                 
   218                                 SROW:
   219 0000027C 06000000                dd 6
   220 00000280 00000000                dd 0
   221 00000284 05000000                dd 5
   222 00000288 0A000000                dd 10
   223 0000028C 0F000000                dd 15
   224 00000290 14000000                dd 20
   225 00000294 19000000                dd 25
   226                                 
   227                                 
   228                                 CTYPE:
   229 00000298 00000000                times 1 dd 0
   230                                 
   231                                 STATE:
   232 0000029C 00000000                times 1 dd 0
   233                                 
   234                                 LKIND:
   235 000002A0 00000000                times 1 dd 0
   236                                 
   237                                 TKIND:
   238 000002A4 00000000                times 1 dd 0
   239                                 
   240                                 I:
   241 000002A8 00000000                times 1 dd 0
   242                                 
   243                                 CHAR:
   244 000002AC 00000000                times 1 dd 0
   245                                 
   246                                 ANCHOR:
   247 000002B0 00000000                times 1 dd 0
   248                                 
   249                                 NUM:
   250 000002B4 00000000                times 1 dd 0
   251                                 
   252                                 INDEX:
   253 000002B8 00000000                times 1 dd 0
   254                                 WORDS:
   255 000002BC 00000000                times 1 dd 0
   256                                 
   257                                 VAL:
   258 000002C0 00000000                times 1 dd 0
   259                                 TAG:
   260 000002C4 00000000                times 1 dd 0
   261                                 
   262                                 
   263                                 
   264                                 [section .text]
   265                                 
   266                                 LEX:
   267 00000000 55                      push EBP
   268 00000001 89E5                    mov EBP,ESP
   269                                 
   270                                 
   271                                 
   272                                 
   273                                 
   274                                 
   275 00000003 B801000000              mov EAX,1
   276 00000008 A3[00000000]            mov [STATE],EAX
   277                                 
   278                                 
   279                                 
   280 0000000D 8B5D0C                  mov EBX,[EBP+12]
   281 00000010 8B03                    mov EAX,[EBX]
   282 00000012 A3[00000000]            mov [I],EAX
   283                                 
   284                                 
   285 00000017 B800000000              mov EAX,0
   286 0000001C A3[00000000]            mov [ANCHOR],EAX
   287                                 
   288                                 
   289 00000021 B800000000              mov EAX,0
   290 00000026 A3[00000000]            mov [NUM],EAX
   291                                 
   292                                 
   293                                 LJ1:
   294                                 
   295 0000002B B801000000              mov EAX,1
   296 00000030 09C0                    or EAX,EAX
   297 00000032 0F84BD000000            jz LJ2
   298                                 
   299                                 
   300 00000038 A1[00000000]            mov EAX,[I]
   301 0000003D C1E002                  sal EAX,2
   302 00000040 05[00000000]            add EAX,BUFF
   303 00000045 8B00                    mov EAX,[EAX]
   304 00000047 A3[00000000]            mov [CHAR],EAX
   305                                 
   306                                 
   307 0000004C B801000000              mov EAX,1
   308 00000051 F7D8                    neg EAX
   309 00000053 A3[00000000]            mov [T1Z],EAX
   310 00000058 A1[00000000]            mov EAX,[CHAR]
   311 0000005D 2B05[00000000]          sub EAX,[T1Z]
   312 00000063 7503                    jne LJ3
   313                                 
   314 00000065 E98C000000              jmp LJ2
   315                                 
   316                                 LJ3:
   317                                 
   318                                 
   319 0000006A A1[00000000]            mov EAX,[CHAR]
   320 0000006F C1E002                  sal EAX,2
   321 00000072 05[00000000]            add EAX,T
   322 00000077 8B00                    mov EAX,[EAX]
   323 00000079 A3[00000000]            mov [CTYPE],EAX
   324                                 
   325                                 
   326 0000007E A1[00000000]            mov EAX,[STATE]
   327 00000083 C1E002                  sal EAX,2
   328 00000086 05[00000000]            add EAX,SROW
   329 0000008B 8B00                    mov EAX,[EAX]
   330 0000008D 0305[00000000]          add EAX,[CTYPE]
   331 00000093 C1E002                  sal EAX,2
   332 00000096 05[00000000]            add EAX,S
   333 0000009B 8B00                    mov EAX,[EAX]
   334 0000009D A3[00000000]            mov [STATE],EAX
   335                                 
   336                                 
   337 000000A2 A1[00000000]            mov EAX,[STATE]
   338 000000A7 48                      dec EAX
   339 000000A8 7411                    jz LJ4
   340                                 
   341                                 
   342 000000AA A1[00000000]            mov EAX,[ANCHOR]
   343 000000AF 09C0                    or EAX,EAX
   344 000000B1 7508                    jne LJ5
   345                                 
   346                                 
   347 000000B3 A1[00000000]            mov EAX,[I]
   348 000000B8 A3[00000000]            mov [ANCHOR],EAX
   349                                 
   350                                 LJ5:
   351                                 
   352                                 LJ4:
   353                                 
   354                                 
   355 000000BD A1[00000000]            mov EAX,[STATE]
   356 000000C2 83E803                  sub EAX,3
   357 000000C5 7517                    jne LJ6
   358                                 
   359                                 
   360 000000C7 B80A000000              mov EAX,10
   361 000000CC F72D[00000000]          imul dword [NUM]
   362 000000D2 83E830                  sub EAX,48
   363 000000D5 0305[00000000]          add EAX,[CHAR]
   364 000000DB A3[00000000]            mov [NUM],EAX
   365                                 
   366                                 LJ6:
   367                                 
   368                                 
   369 000000E0 A1[00000000]            mov EAX,[STATE]
   370 000000E5 09C0                    or EAX,EAX
   371 000000E7 7D00                    jge LJ7
   372                                 
   373 000000E9 EB0E                    jmp LJ2
   374                                 
   375                                 LJ7:
   376                                 
   377                                 
   378 000000EB A1[00000000]            mov EAX,[I]
   379 000000F0 40                      inc EAX
   380 000000F1 A3[00000000]            mov [I],EAX
   381                                 
   382 000000F6 E92BFFFFFF              jmp LJ1
   383                                 LJ2:
   384                                 
   385                                 
   386                                 
   387 000000FB A1[00000000]            mov EAX,[I]
   388                                 
   389 00000100 8B5D0C                  mov EBX,[EBP+12]
   390 00000103 8903                    mov [EBX],EAX
   391                                 
   392                                 
   393 00000105 A1[00000000]            mov EAX,[STATE]
   394 0000010A F7D8                    neg EAX
   395 0000010C A3[00000000]            mov [LKIND],EAX
   396                                 
   397                                 
   398 00000111 A1[00000000]            mov EAX,[I]
   399 00000116 2B05[00000000]          sub EAX,[ANCHOR]
   400 0000011C C1E008                  sal EAX,8
   401 0000011F 0B05[00000000]          or EAX,[ANCHOR]
   402                                 
   403 00000125 8B5D08                  mov EBX,[EBP+8]
   404 00000128 8903                    mov [EBX],EAX
   405                                 
   406                                 
   407                                 
   408 0000012A A1[00000000]            mov EAX,[LKIND]
   409 0000012F 48                      dec EAX
   410 00000130 0F8591000000            jne LJ8
   411                                 
   412                                 
   413                                 
   414 00000136 8B5D08                  mov EBX,[EBP+8]
   415                                 
   416                                 
   417 00000139 53                      push EBX
   418 0000013A 68[00000000]            push BUFF
   419 0000013F E8(F6FFFFFF)            call A2B40L
   420 00000144 83C408                  add ESP,4*2
   421 00000147 A3[00000000]            mov [WORDS],EAX
   422                                 
   423                                 
   424                                 
   425 0000014C 68[00000000]            push WORDS
   426 00000151 68[00000000]            push VAL
   427 00000156 68[00000000]            push TAG
   428 0000015B E8(F6FFFFFF)            call LOOKS
   429 00000160 83C40C                  add ESP,4*3
   430 00000163 A3[00000000]            mov [INDEX],EAX
   431                                 
   432                                 
   433 00000168 B801000000              mov EAX,1
   434 0000016D C1E002                  sal EAX,2
   435                                 
   436 00000170 8B5D08                  mov EBX,[EBP+8]
   437 00000173 01D8                    add EAX,EBX
   438 00000175 A3[00000000]            mov [T1Z],EAX
   439 0000017A A1[00000000]            mov EAX,[INDEX]
   440 0000017F 89C2                    mov EDX,EAX
   441 00000181 A1[00000000]            mov EAX,[T1Z]
   442 00000186 8910                    mov [EAX],EDX
   443                                 
   444                                 
   445 00000188 B802000000              mov EAX,2
   446 0000018D C1E002                  sal EAX,2
   447                                 
   448 00000190 8B5D08                  mov EBX,[EBP+8]
   449 00000193 01D8                    add EAX,EBX
   450 00000195 A3[00000000]            mov [T1Z],EAX
   451 0000019A A1[00000000]            mov EAX,[VAL]
   452 0000019F 89C2                    mov EDX,EAX
   453 000001A1 A1[00000000]            mov EAX,[T1Z]
   454 000001A6 8910                    mov [EAX],EDX
   455                                 
   456                                 
   457 000001A8 B803000000              mov EAX,3
   458 000001AD C1E002                  sal EAX,2
   459                                 
   460 000001B0 8B5D08                  mov EBX,[EBP+8]
   461 000001B3 01D8                    add EAX,EBX
   462 000001B5 A3[00000000]            mov [T1Z],EAX
   463 000001BA A1[00000000]            mov EAX,[TAG]
   464 000001BF 89C2                    mov EDX,EAX
   465 000001C1 A1[00000000]            mov EAX,[T1Z]
   466 000001C6 8910                    mov [EAX],EDX
   467                                 
   468 000001C8 E9CB000000              jmp LJ11
   469                                 LJ8:
   470                                 
   471 000001CD A1[00000000]            mov EAX,[LKIND]
   472 000001D2 83E802                  sub EAX,2
   473 000001D5 7523                    jne LJ12
   474                                 
   475                                 
   476 000001D7 B801000000              mov EAX,1
   477 000001DC C1E002                  sal EAX,2
   478                                 
   479 000001DF 8B5D08                  mov EBX,[EBP+8]
   480 000001E2 01D8                    add EAX,EBX
   481 000001E4 A3[00000000]            mov [T1Z],EAX
   482 000001E9 A1[00000000]            mov EAX,[NUM]
   483 000001EE 89C2                    mov EDX,EAX
   484 000001F0 A1[00000000]            mov EAX,[T1Z]
   485 000001F5 8910                    mov [EAX],EDX
   486                                 
   487 000001F7 E99C000000              jmp LJ13
   488                                 LJ12:
   489                                 
   490 000001FC A1[00000000]            mov EAX,[LKIND]
   491 00000201 83E804                  sub EAX,4
   492 00000204 0F858D000000            jne LJ14
   493                                 
   494                                 
   495                                 
   496 0000020A A1[00000000]            mov EAX,[ANCHOR]
   497 0000020F C1E002                  sal EAX,2
   498 00000212 05[00000000]            add EAX,BUFF
   499 00000217 8B00                    mov EAX,[EAX]
   500 00000219 6BC03D                  imul EAX,61
   501 0000021C A3[00000000]            mov [WORDS],EAX
   502                                 
   503                                 
   504                                 
   505 00000221 68[00000000]            push WORDS
   506 00000226 68[00000000]            push VAL
   507 0000022B 68[00000000]            push TAG
   508 00000230 E8(F6FFFFFF)            call LOOKS
   509 00000235 83C40C                  add ESP,4*3
   510 00000238 A3[00000000]            mov [INDEX],EAX
   511                                 
   512                                 
   513 0000023D B801000000              mov EAX,1
   514 00000242 C1E002                  sal EAX,2
   515                                 
   516 00000245 8B5D08                  mov EBX,[EBP+8]
   517 00000248 01D8                    add EAX,EBX
   518 0000024A A3[00000000]            mov [T1Z],EAX
   519 0000024F A1[00000000]            mov EAX,[INDEX]
   520 00000254 89C2                    mov EDX,EAX
   521 00000256 A1[00000000]            mov EAX,[T1Z]
   522 0000025B 8910                    mov [EAX],EDX
   523                                 
   524                                 
   525 0000025D B802000000              mov EAX,2
   526 00000262 C1E002                  sal EAX,2
   527                                 
   528 00000265 8B5D08                  mov EBX,[EBP+8]
   529 00000268 01D8                    add EAX,EBX
   530 0000026A A3[00000000]            mov [T1Z],EAX
   531 0000026F A1[00000000]            mov EAX,[VAL]
   532 00000274 89C2                    mov EDX,EAX
   533 00000276 A1[00000000]            mov EAX,[T1Z]
   534 0000027B 8910                    mov [EAX],EDX
   535                                 
   536                                 
   537 0000027D B803000000              mov EAX,3
   538 00000282 C1E002                  sal EAX,2
   539                                 
   540 00000285 8B5D08                  mov EBX,[EBP+8]
   541 00000288 01D8                    add EAX,EBX
   542 0000028A A3[00000000]            mov [T1Z],EAX
   543 0000028F A1[00000000]            mov EAX,[TAG]
   544 00000294 89C2                    mov EDX,EAX
   545 00000296 A1[00000000]            mov EAX,[T1Z]
   546 0000029B 8910                    mov [EAX],EDX
   547                                 
   548                                 LJ14:
   549                                 LJ13:
   550                                 LJ11:
   551                                 
   552                                 
   553                                 
   554 0000029D A1[00000000]            mov EAX,[LKIND]
   555 000002A2 C1E01C                  sal EAX,28
   556                                 
   557 000002A5 8B5D08                  mov EBX,[EBP+8]
   558 000002A8 0B03                    or EAX,[EBX]
   559                                 
   560 000002AA 8B5D08                  mov EBX,[EBP+8]
   561 000002AD 8903                    mov [EBX],EAX
   562                                 
   563                                 
   564 000002AF A1[00000000]            mov EAX,[LKIND]
   565                                 
   566 000002B4 89EC                    mov ESP,EBP
   567 000002B6 5D                      pop EBP
   568 000002B7 C3                      ret
   569                                 
   570                                 [section .data]
   571                                 T1Z:
   572 000002C8 00000000<rept>          times 2 dd 0
   573                                 [section .text]
   574                                 
   575                                  end
