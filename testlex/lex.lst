     1                                 %line 1+1 lex.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 [global progr]
    12                                 [extern exit]
    13                                 
    14                                 [global LEX]
    15                                 
    16                                 [extern BUFF]
    17                                 
    18                                 [extern A2B40L]
    19                                 
    20                                 [extern LOOKS]
    21                                 
    22                                 
    23                                 
    24                                 
    25                                 
    26                                 [section .data]
    27                                 T:
    28 00000000 01000000                dd 1
    29 00000004 01000000                dd 1
    30 00000008 01000000                dd 1
    31 0000000C 01000000                dd 1
    32 00000010 01000000                dd 1
    33 00000014 01000000                dd 1
    34 00000018 01000000                dd 1
    35 0000001C 01000000                dd 1
    36 00000020 01000000                dd 1
    37 00000024 01000000                dd 1
    38 00000028 01000000                dd 1
    39 0000002C 01000000                dd 1
    40 00000030 01000000                dd 1
    41 00000034 01000000                dd 1
    42 00000038 01000000                dd 1
    43 0000003C 01000000                dd 1
    44                                 
    45                                 T2:
    46 00000040 01000000                dd 1
    47 00000044 01000000                dd 1
    48 00000048 01000000                dd 1
    49 0000004C 01000000                dd 1
    50 00000050 01000000                dd 1
    51 00000054 01000000                dd 1
    52 00000058 01000000                dd 1
    53 0000005C 01000000                dd 1
    54 00000060 01000000                dd 1
    55 00000064 01000000                dd 1
    56 00000068 01000000                dd 1
    57 0000006C 01000000                dd 1
    58 00000070 01000000                dd 1
    59 00000074 01000000                dd 1
    60 00000078 01000000                dd 1
    61 0000007C 01000000                dd 1
    62                                 
    63                                 T3:
    64 00000080 01000000                dd 1
    65 00000084 05000000                dd 5
    66 00000088 05000000                dd 5
    67 0000008C 05000000                dd 5
    68 00000090 05000000                dd 5
    69 00000094 05000000                dd 5
    70 00000098 05000000                dd 5
    71 0000009C 04000000                dd 4
    72 000000A0 05000000                dd 5
    73 000000A4 05000000                dd 5
    74 000000A8 05000000                dd 5
    75 000000AC 05000000                dd 5
    76 000000B0 05000000                dd 5
    77 000000B4 05000000                dd 5
    78 000000B8 05000000                dd 5
    79 000000BC 05000000                dd 5
    80                                 
    81                                 T4:
    82 000000C0 03000000                dd 3
    83 000000C4 03000000                dd 3
    84 000000C8 03000000                dd 3
    85 000000CC 03000000                dd 3
    86 000000D0 03000000                dd 3
    87 000000D4 03000000                dd 3
    88 000000D8 03000000                dd 3
    89 000000DC 03000000                dd 3
    90 000000E0 03000000                dd 3
    91 000000E4 03000000                dd 3
    92 000000E8 05000000                dd 5
    93 000000EC 05000000                dd 5
    94 000000F0 05000000                dd 5
    95 000000F4 05000000                dd 5
    96 000000F8 05000000                dd 5
    97 000000FC 05000000                dd 5
    98                                 
    99                                 T5:
   100 00000100 05000000                dd 5
   101 00000104 02000000                dd 2
   102 00000108 02000000                dd 2
   103 0000010C 02000000                dd 2
   104 00000110 02000000                dd 2
   105 00000114 02000000                dd 2
   106 00000118 02000000                dd 2
   107 0000011C 02000000                dd 2
   108 00000120 02000000                dd 2
   109 00000124 02000000                dd 2
   110 00000128 02000000                dd 2
   111 0000012C 02000000                dd 2
   112 00000130 02000000                dd 2
   113 00000134 02000000                dd 2
   114 00000138 02000000                dd 2
   115 0000013C 02000000                dd 2
   116                                 
   117                                 T6:
   118 00000140 02000000                dd 2
   119 00000144 02000000                dd 2
   120 00000148 02000000                dd 2
   121 0000014C 02000000                dd 2
   122 00000150 02000000                dd 2
   123 00000154 02000000                dd 2
   124 00000158 02000000                dd 2
   125 0000015C 02000000                dd 2
   126 00000160 02000000                dd 2
   127 00000164 02000000                dd 2
   128 00000168 02000000                dd 2
   129 0000016C 05000000                dd 5
   130 00000170 05000000                dd 5
   131 00000174 05000000                dd 5
   132 00000178 05000000                dd 5
   133 0000017C 05000000                dd 5
   134                                 
   135                                 T7:
   136 00000180 05000000                dd 5
   137 00000184 02000000                dd 2
   138 00000188 02000000                dd 2
   139 0000018C 02000000                dd 2
   140 00000190 02000000                dd 2
   141 00000194 02000000                dd 2
   142 00000198 02000000                dd 2
   143 0000019C 02000000                dd 2
   144 000001A0 02000000                dd 2
   145 000001A4 02000000                dd 2
   146 000001A8 02000000                dd 2
   147 000001AC 02000000                dd 2
   148 000001B0 02000000                dd 2
   149 000001B4 02000000                dd 2
   150 000001B8 02000000                dd 2
   151 000001BC 02000000                dd 2
   152                                 
   153                                 T8:
   154 000001C0 02000000                dd 2
   155 000001C4 02000000                dd 2
   156 000001C8 02000000                dd 2
   157 000001CC 02000000                dd 2
   158 000001D0 02000000                dd 2
   159 000001D4 02000000                dd 2
   160 000001D8 02000000                dd 2
   161 000001DC 02000000                dd 2
   162 000001E0 02000000                dd 2
   163 000001E4 02000000                dd 2
   164 000001E8 02000000                dd 2
   165 000001EC 05000000                dd 5
   166 000001F0 05000000                dd 5
   167 000001F4 05000000                dd 5
   168 000001F8 05000000                dd 5
   169 000001FC 05000000                dd 5
   170                                 
   171                                 
   172                                 S:
   173 00000200 1E000000                dd 30
   174                                 
   175                                 S1:
   176 00000204 01000000                dd 1
   177 00000208 02000000                dd 2
   178 0000020C 03000000                dd 3
   179 00000210 04000000                dd 4
   180 00000214 06000000                dd 6
   181                                 
   182                                 S2:
   183 00000218 FFFFFFFF                dd -1
   184 0000021C 02000000                dd 2
   185 00000220 02000000                dd 2
   186 00000224 FFFFFFFF                dd -1
   187 00000228 FFFFFFFF                dd -1
   188                                 
   189                                 S3:
   190 0000022C FEFFFFFF                dd -2
   191 00000230 FEFFFFFF                dd -2
   192 00000234 03000000                dd 3
   193 00000238 FEFFFFFF                dd -2
   194 0000023C FEFFFFFF                dd -2
   195                                 
   196                                 S4:
   197 00000240 04000000                dd 4
   198 00000244 04000000                dd 4
   199 00000248 04000000                dd 4
   200 0000024C 05000000                dd 5
   201 00000250 04000000                dd 4
   202                                 
   203                                 S5:
   204 00000254 FDFFFFFF                dd -3
   205 00000258 FDFFFFFF                dd -3
   206 0000025C FDFFFFFF                dd -3
   207 00000260 04000000                dd 4
   208 00000264 FDFFFFFF                dd -3
   209                                 
   210                                 S6:
   211 00000268 FCFFFFFF                dd -4
   212 0000026C FCFFFFFF                dd -4
   213 00000270 FCFFFFFF                dd -4
   214 00000274 FCFFFFFF                dd -4
   215 00000278 FCFFFFFF                dd -4
   216                                 
   217                                 SROW:
   218 0000027C 06000000                dd 6
   219 00000280 00000000                dd 0
   220 00000284 05000000                dd 5
   221 00000288 0A000000                dd 10
   222 0000028C 0F000000                dd 15
   223 00000290 14000000                dd 20
   224 00000294 19000000                dd 25
   225                                 
   226                                 
   227                                 CTYPE:
   228 00000298 00000000                times 1 dd 0
   229                                 
   230                                 STATE:
   231 0000029C 00000000                times 1 dd 0
   232                                 
   233                                 LKIND:
   234 000002A0 00000000                times 1 dd 0
   235                                 
   236                                 TKIND:
   237 000002A4 00000000                times 1 dd 0
   238                                 
   239                                 I:
   240 000002A8 00000000                times 1 dd 0
   241                                 
   242                                 CHAR:
   243 000002AC 00000000                times 1 dd 0
   244                                 
   245                                 ANCHOR:
   246 000002B0 00000000                times 1 dd 0
   247                                 
   248                                 NUM:
   249 000002B4 00000000                times 1 dd 0
   250                                 
   251                                 INDEX:
   252 000002B8 00000000                times 1 dd 0
   253                                 WORDS:
   254 000002BC 00000000                times 1 dd 0
   255                                 
   256                                 VAL:
   257 000002C0 00000000                times 1 dd 0
   258                                 TAG:
   259 000002C4 00000000                times 1 dd 0
   260                                 
   261                                 
   262                                 
   263                                 [section .text]
   264                                 
   265                                 LEX:
   266 00000000 55                      push EBP
   267 00000001 89E5                    mov EBP,ESP
   268                                 
   269                                 
   270                                 
   271                                 
   272                                 
   273                                 
   274 00000003 B801000000              mov EAX,1
   275 00000008 A3[00000000]            mov [STATE],EAX
   276                                 
   277                                 
   278                                 
   279 0000000D 8B5D0C                  mov EBX,[EBP+12]
   280 00000010 8B03                    mov EAX,[EBX]
   281 00000012 A3[00000000]            mov [I],EAX
   282                                 
   283                                 
   284 00000017 B800000000              mov EAX,0
   285 0000001C A3[00000000]            mov [ANCHOR],EAX
   286                                 
   287                                 
   288 00000021 B800000000              mov EAX,0
   289 00000026 A3[00000000]            mov [NUM],EAX
   290                                 
   291                                 
   292                                 LJ1:
   293                                 
   294 0000002B B801000000              mov EAX,1
   295 00000030 09C0                    or EAX,EAX
   296 00000032 0F84BD000000            jz LJ2
   297                                 
   298                                 
   299 00000038 A1[00000000]            mov EAX,[I]
   300 0000003D C1E002                  sal EAX,2
   301 00000040 05[00000000]            add EAX,BUFF
   302 00000045 8B00                    mov EAX,[EAX]
   303 00000047 A3[00000000]            mov [CHAR],EAX
   304                                 
   305                                 
   306 0000004C B801000000              mov EAX,1
   307 00000051 F7D8                    neg EAX
   308 00000053 A3[00000000]            mov [T1Z],EAX
   309 00000058 A1[00000000]            mov EAX,[CHAR]
   310 0000005D 2B05[00000000]          sub EAX,[T1Z]
   311 00000063 7503                    jne LJ3
   312                                 
   313 00000065 E98C000000              jmp LJ2
   314                                 
   315                                 LJ3:
   316                                 
   317                                 
   318 0000006A A1[00000000]            mov EAX,[CHAR]
   319 0000006F C1E002                  sal EAX,2
   320 00000072 05[00000000]            add EAX,T
   321 00000077 8B00                    mov EAX,[EAX]
   322 00000079 A3[00000000]            mov [CTYPE],EAX
   323                                 
   324                                 
   325 0000007E A1[00000000]            mov EAX,[STATE]
   326 00000083 C1E002                  sal EAX,2
   327 00000086 05[00000000]            add EAX,SROW
   328 0000008B 8B00                    mov EAX,[EAX]
   329 0000008D 0305[00000000]          add EAX,[CTYPE]
   330 00000093 C1E002                  sal EAX,2
   331 00000096 05[00000000]            add EAX,S
   332 0000009B 8B00                    mov EAX,[EAX]
   333 0000009D A3[00000000]            mov [STATE],EAX
   334                                 
   335                                 
   336 000000A2 A1[00000000]            mov EAX,[STATE]
   337 000000A7 48                      dec EAX
   338 000000A8 7411                    jz LJ4
   339                                 
   340                                 
   341 000000AA A1[00000000]            mov EAX,[ANCHOR]
   342 000000AF 09C0                    or EAX,EAX
   343 000000B1 7508                    jne LJ5
   344                                 
   345                                 
   346 000000B3 A1[00000000]            mov EAX,[I]
   347 000000B8 A3[00000000]            mov [ANCHOR],EAX
   348                                 
   349                                 LJ5:
   350                                 
   351                                 LJ4:
   352                                 
   353                                 
   354 000000BD A1[00000000]            mov EAX,[STATE]
   355 000000C2 83E803                  sub EAX,3
   356 000000C5 7517                    jne LJ6
   357                                 
   358                                 
   359 000000C7 B80A000000              mov EAX,10
   360 000000CC F72D[00000000]          imul dword [NUM]
   361 000000D2 83E830                  sub EAX,48
   362 000000D5 0305[00000000]          add EAX,[CHAR]
   363 000000DB A3[00000000]            mov [NUM],EAX
   364                                 
   365                                 LJ6:
   366                                 
   367                                 
   368 000000E0 A1[00000000]            mov EAX,[STATE]
   369 000000E5 09C0                    or EAX,EAX
   370 000000E7 7D00                    jge LJ7
   371                                 
   372 000000E9 EB0E                    jmp LJ2
   373                                 
   374                                 LJ7:
   375                                 
   376                                 
   377 000000EB A1[00000000]            mov EAX,[I]
   378 000000F0 40                      inc EAX
   379 000000F1 A3[00000000]            mov [I],EAX
   380                                 
   381 000000F6 E92BFFFFFF              jmp LJ1
   382                                 LJ2:
   383                                 
   384                                 
   385                                 
   386 000000FB A1[00000000]            mov EAX,[I]
   387                                 
   388 00000100 8B5D0C                  mov EBX,[EBP+12]
   389 00000103 8903                    mov [EBX],EAX
   390                                 
   391                                 
   392 00000105 A1[00000000]            mov EAX,[STATE]
   393 0000010A F7D8                    neg EAX
   394 0000010C A3[00000000]            mov [LKIND],EAX
   395                                 
   396                                 
   397 00000111 A1[00000000]            mov EAX,[I]
   398 00000116 2B05[00000000]          sub EAX,[ANCHOR]
   399 0000011C C1E008                  sal EAX,8
   400 0000011F 0B05[00000000]          or EAX,[ANCHOR]
   401                                 
   402 00000125 8B5D08                  mov EBX,[EBP+8]
   403 00000128 8903                    mov [EBX],EAX
   404                                 
   405                                 
   406                                 
   407 0000012A A1[00000000]            mov EAX,[LKIND]
   408 0000012F 48                      dec EAX
   409 00000130 0F8591000000            jne LJ8
   410                                 
   411                                 
   412                                 
   413 00000136 8B5D08                  mov EBX,[EBP+8]
   414                                 
   415                                 
   416 00000139 53                      push EBX
   417 0000013A 68[00000000]            push BUFF
   418 0000013F E8(F6FFFFFF)            call A2B40L
   419 00000144 83C408                  add ESP,4*2
   420 00000147 A3[00000000]            mov [WORDS],EAX
   421                                 
   422                                 
   423                                 
   424 0000014C 68[00000000]            push WORDS
   425 00000151 68[00000000]            push VAL
   426 00000156 68[00000000]            push TAG
   427 0000015B E8(F6FFFFFF)            call LOOKS
   428 00000160 83C40C                  add ESP,4*3
   429 00000163 A3[00000000]            mov [INDEX],EAX
   430                                 
   431                                 
   432 00000168 B801000000              mov EAX,1
   433 0000016D C1E002                  sal EAX,2
   434                                 
   435 00000170 8B5D08                  mov EBX,[EBP+8]
   436 00000173 01D8                    add EAX,EBX
   437 00000175 A3[00000000]            mov [T1Z],EAX
   438 0000017A A1[00000000]            mov EAX,[INDEX]
   439 0000017F 89C2                    mov EDX,EAX
   440 00000181 A1[00000000]            mov EAX,[T1Z]
   441 00000186 8910                    mov [EAX],EDX
   442                                 
   443                                 
   444 00000188 B802000000              mov EAX,2
   445 0000018D C1E002                  sal EAX,2
   446                                 
   447 00000190 8B5D08                  mov EBX,[EBP+8]
   448 00000193 01D8                    add EAX,EBX
   449 00000195 A3[00000000]            mov [T1Z],EAX
   450 0000019A A1[00000000]            mov EAX,[VAL]
   451 0000019F 89C2                    mov EDX,EAX
   452 000001A1 A1[00000000]            mov EAX,[T1Z]
   453 000001A6 8910                    mov [EAX],EDX
   454                                 
   455                                 
   456 000001A8 B803000000              mov EAX,3
   457 000001AD C1E002                  sal EAX,2
   458                                 
   459 000001B0 8B5D08                  mov EBX,[EBP+8]
   460 000001B3 01D8                    add EAX,EBX
   461 000001B5 A3[00000000]            mov [T1Z],EAX
   462 000001BA A1[00000000]            mov EAX,[TAG]
   463 000001BF 89C2                    mov EDX,EAX
   464 000001C1 A1[00000000]            mov EAX,[T1Z]
   465 000001C6 8910                    mov [EAX],EDX
   466                                 
   467 000001C8 E9CC000000              jmp LJ11
   468                                 LJ8:
   469                                 
   470 000001CD A1[00000000]            mov EAX,[LKIND]
   471 000001D2 83E802                  sub EAX,2
   472 000001D5 7523                    jne LJ12
   473                                 
   474                                 
   475 000001D7 B801000000              mov EAX,1
   476 000001DC C1E002                  sal EAX,2
   477                                 
   478 000001DF 8B5D08                  mov EBX,[EBP+8]
   479 000001E2 01D8                    add EAX,EBX
   480 000001E4 A3[00000000]            mov [T1Z],EAX
   481 000001E9 A1[00000000]            mov EAX,[NUM]
   482 000001EE 89C2                    mov EDX,EAX
   483 000001F0 A1[00000000]            mov EAX,[T1Z]
   484 000001F5 8910                    mov [EAX],EDX
   485                                 
   486 000001F7 E99D000000              jmp LJ13
   487                                 LJ12:
   488                                 
   489 000001FC A1[00000000]            mov EAX,[LKIND]
   490 00000201 83E804                  sub EAX,4
   491 00000204 0F858E000000            jne LJ14
   492                                 
   493                                 
   494 0000020A A1[00000000]            mov EAX,[ANCHOR]
   495 0000020F 40                      inc EAX
   496 00000210 C1E002                  sal EAX,2
   497 00000213 05[00000000]            add EAX,BUFF
   498 00000218 8B00                    mov EAX,[EAX]
   499 0000021A 6BC03D                  imul EAX,61
   500 0000021D A3[00000000]            mov [WORDS],EAX
   501                                 
   502                                 
   503                                 
   504 00000222 68[00000000]            push WORDS
   505 00000227 68[00000000]            push VAL
   506 0000022C 68[00000000]            push TAG
   507 00000231 E8(F6FFFFFF)            call LOOKS
   508 00000236 83C40C                  add ESP,4*3
   509 00000239 A3[00000000]            mov [INDEX],EAX
   510                                 
   511                                 
   512 0000023E B801000000              mov EAX,1
   513 00000243 C1E002                  sal EAX,2
   514                                 
   515 00000246 8B5D08                  mov EBX,[EBP+8]
   516 00000249 01D8                    add EAX,EBX
   517 0000024B A3[00000000]            mov [T1Z],EAX
   518 00000250 A1[00000000]            mov EAX,[INDEX]
   519 00000255 89C2                    mov EDX,EAX
   520 00000257 A1[00000000]            mov EAX,[T1Z]
   521 0000025C 8910                    mov [EAX],EDX
   522                                 
   523                                 
   524 0000025E B802000000              mov EAX,2
   525 00000263 C1E002                  sal EAX,2
   526                                 
   527 00000266 8B5D08                  mov EBX,[EBP+8]
   528 00000269 01D8                    add EAX,EBX
   529 0000026B A3[00000000]            mov [T1Z],EAX
   530 00000270 A1[00000000]            mov EAX,[VAL]
   531 00000275 89C2                    mov EDX,EAX
   532 00000277 A1[00000000]            mov EAX,[T1Z]
   533 0000027C 8910                    mov [EAX],EDX
   534                                 
   535                                 
   536 0000027E B803000000              mov EAX,3
   537 00000283 C1E002                  sal EAX,2
   538                                 
   539 00000286 8B5D08                  mov EBX,[EBP+8]
   540 00000289 01D8                    add EAX,EBX
   541 0000028B A3[00000000]            mov [T1Z],EAX
   542 00000290 A1[00000000]            mov EAX,[TAG]
   543 00000295 89C2                    mov EDX,EAX
   544 00000297 A1[00000000]            mov EAX,[T1Z]
   545 0000029C 8910                    mov [EAX],EDX
   546                                 
   547                                 LJ14:
   548                                 LJ13:
   549                                 LJ11:
   550                                 
   551                                 
   552                                 
   553 0000029E A1[00000000]            mov EAX,[LKIND]
   554 000002A3 C1E01C                  sal EAX,28
   555                                 
   556 000002A6 8B5D08                  mov EBX,[EBP+8]
   557 000002A9 0B03                    or EAX,[EBX]
   558                                 
   559 000002AB 8B5D08                  mov EBX,[EBP+8]
   560 000002AE 8903                    mov [EBX],EAX
   561                                 
   562                                 
   563 000002B0 A1[00000000]            mov EAX,[LKIND]
   564                                 
   565 000002B5 89EC                    mov ESP,EBP
   566 000002B7 5D                      pop EBP
   567 000002B8 C3                      ret
   568                                 
   569                                 [section .data]
   570                                 T1Z:
   571 000002C8 00000000<rept>          times 2 dd 0
   572                                 [section .text]
   573                                 
   574                                  end
