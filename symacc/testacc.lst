     1                                 %line 1+1 testacc.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 [global TESTACC]
     7                                 
     8                                 [global progr]
     9                                 [extern exit]
    10                                 
    11                                 [global TESTACC]
    12                                 [section .text]
    13                                 progr:
    14 00000000 55                      push EBP
    15 00000001 89E5                    mov EBP,ESP
    16 00000003 EBFE                    jmp TESTACC
    17                                 
    18                                 
    19                                 [extern LOOKS]
    20                                 [extern GETS]
    21                                 [extern PUTS]
    22                                 [extern GETWRD]
    23                                 
    24                                 [extern A2B40]
    25                                 [extern B402A]
    26                                 
    27                                 [extern READ]
    28                                 [extern WRITE]
    29                                 [extern IFORM]
    30                                 
    31                                 [extern LEX]
    32                                 [extern CAT2]
    33                                 
    34                                 [extern MASKV]
    35                                 
    36                                 
    37                                 [section .data]
    38                                 IFS:
    39 00000000 02000000                dd 2
    40 00000004 49000000                dd 73
    41 00000008 46000000                dd 70
    42                                 
    43                                 THENS:
    44 0000000C 04000000                dd 4
    45 00000010 54000000                dd 84
    46 00000014 48000000                dd 72
    47 00000018 45000000                dd 69
    48 0000001C 4E000000                dd 78
    49                                 
    50                                 ELSES:
    51 00000020 04000000                dd 4
    52 00000024 45000000                dd 69
    53 00000028 4C000000                dd 76
    54 0000002C 53000000                dd 83
    55 00000030 45000000                dd 69
    56                                 
    57                                 PROCES:
    58 00000034 09000000                dd 9
    59 00000038 50000000                dd 80
    60 0000003C 52000000                dd 82
    61 00000040 4F000000                dd 79
    62 00000044 43000000                dd 67
    63 00000048 45000000                dd 69
    64 0000004C 44000000                dd 68
    65 00000050 55000000                dd 85
    66 00000054 52000000                dd 82
    67 00000058 45000000                dd 69
    68                                 
    69                                 PROCS:
    70 0000005C 04000000                dd 4
    71 00000060 50000000                dd 80
    72 00000064 52000000                dd 82
    73 00000068 4F000000                dd 79
    74 0000006C 43000000                dd 67
    75                                 
    76                                 GREET:
    77 00000070 11000000                dd 17
    78 00000074 42000000                dd 66
    79 00000078 65000000                dd 101
    80 0000007C 67000000                dd 103
    81 00000080 69000000                dd 105
    82 00000084 6E000000                dd 110
    83 00000088 20000000                dd 32
    84 0000008C 53000000                dd 83
    85 00000090 59000000                dd 89
    86 00000094 4D000000                dd 77
    87 00000098 41000000                dd 65
    88 0000009C 43000000                dd 67
    89 000000A0 43000000                dd 67
    90 000000A4 20000000                dd 32
    91 000000A8 54000000                dd 84
    92 000000AC 65000000                dd 101
    93 000000B0 73000000                dd 115
    94 000000B4 74000000                dd 116
    95                                 
    96                                 TESTIT:
    97 000000B8 14000000                dd 20
    98 000000BC 54000000                dd 84
    99 000000C0 65000000                dd 101
   100 000000C4 73000000                dd 115
   101 000000C8 74000000                dd 116
   102 000000CC 3A000000                dd 58
   103 000000D0 20000000                dd 32
   104 000000D4 20000000                dd 32
   105 000000D8 20000000                dd 32
   106 000000DC 20000000                dd 32
   107 000000E0 20000000                dd 32
   108 000000E4 20000000                dd 32
   109 000000E8 20000000                dd 32
   110 000000EC 20000000                dd 32
   111 000000F0 20000000                dd 32
   112 000000F4 20000000                dd 32
   113 000000F8 20000000                dd 32
   114 000000FC 20000000                dd 32
   115 00000100 20000000                dd 32
   116 00000104 20000000                dd 32
   117 00000108 20000000                dd 32
   118                                 
   119                                 STAR:
   120 0000010C 2A000000                dd 42
   121                                 
   122                                 SLASH:
   123 00000110 2F000000                dd 47
   124                                 
   125                                 PLUS:
   126 00000114 2B000000                dd 43
   127                                 
   128                                 MINUS:
   129 00000118 2D000000                dd 45
   130                                 
   131                                 LPAREN:
   132 0000011C 28000000                dd 40
   133                                 
   134                                 RPAREN:
   135 00000120 29000000                dd 41
   136                                 
   137                                 OUTCH:
   138 00000124 03000000                dd 3
   139                                 
   140                                 INDEX:
   141 00000128 00000000                times 1 dd 0
   142                                 VAL:
   143 0000012C 00000000                times 1 dd 0
   144                                 TAG:
   145 00000130 00000000                times 1 dd 0
   146                                 WORDS:
   147 00000134 00000000                times 1 dd 0
   148                                 TTYPE:
   149 00000138 00000000                times 1 dd 0
   150                                 
   151                                 LIST:
   152 0000013C 00000000<rept>          times 21 dd 0
   153                                 
   154                                 SCRATCH:
   155 00000190 0A000000                dd 10
   156 00000194 20000000                dd 32
   157 00000198 20000000                dd 32
   158 0000019C 20000000                dd 32
   159 000001A0 20000000                dd 32
   160 000001A4 20000000                dd 32
   161 000001A8 20000000                dd 32
   162 000001AC 20000000                dd 32
   163 000001B0 20000000                dd 32
   164 000001B4 20000000                dd 32
   165 000001B8 20000000                dd 32
   166                                 
   167                                 
   168                                 [section .text]
   169                                 TESTACC:
   170                                 
   171                                 
   172 00000005 68[00000000]            push OUTCH
   173 0000000A 68[00000000]            push GREET
   174 0000000F E8(F6FFFFFF)            call WRITE
   175 00000014 83C408                  add ESP,4*2
   176                                 
   177                                 
   178 00000017 B8FF7F0000              mov EAX,32767
   179 0000001C D1E0                    sal EAX,1
   180 0000001E 83C801                  or EAX,1
   181 00000021 A3[00000000]            mov [MASKV],EAX
   182                                 
   183                                 
   184 00000026 B807000000              mov EAX,7
   185 0000002B A3[00000000]            mov [TESTIT],EAX
   186                                 
   187                                 
   188 00000030 68[00000000]            push TESTIT
   189 00000035 68[00000000]            push IFS
   190 0000003A E8(F6FFFFFF)            call CAT2
   191 0000003F 83C408                  add ESP,4*2
   192                                 
   193                                 
   194 00000042 68[00000000]            push OUTCH
   195 00000047 68[00000000]            push TESTIT
   196 0000004C E8(F6FFFFFF)            call WRITE
   197 00000051 83C408                  add ESP,4*2
   198                                 
   199                                 
   200                                 
   201 00000054 68[00000000]            push IFS
   202 00000059 E8(F6FFFFFF)            call A2B40
   203 0000005E 83C404                  add ESP,4*1
   204 00000061 A3[00000000]            mov [WORDS],EAX
   205                                 
   206                                 
   207 00000066 68[00000000]            push WORDS
   208 0000006B 68[00000000]            push SCRATCH
   209 00000070 E8(F6FFFFFF)            call IFORM
   210 00000075 83C408                  add ESP,4*2
   211                                 
   212                                 
   213 00000078 68[00000000]            push OUTCH
   214 0000007D 68[00000000]            push SCRATCH
   215 00000082 E8(F6FFFFFF)            call WRITE
   216 00000087 83C408                  add ESP,4*2
   217                                 
   218                                 
   219 0000008A B802000000              mov EAX,2
   220 0000008F A3[00000000]            mov [VAL],EAX
   221                                 
   222                                 
   223 00000094 B803000000              mov EAX,3
   224 00000099 A3[00000000]            mov [TTYPE],EAX
   225                                 
   226                                 
   227 0000009E A1[00000000]            mov EAX,[TTYPE]
   228 000000A3 C1E008                  sal EAX,8
   229 000000A6 A3[00000000]            mov [TAG],EAX
   230                                 
   231                                 
   232                                 
   233 000000AB 68[00000000]            push WORDS
   234 000000B0 68[00000000]            push VAL
   235 000000B5 68[00000000]            push TAG
   236 000000BA E8(F6FFFFFF)            call LOOKS
   237 000000BF 83C40C                  add ESP,4*3
   238 000000C2 A3[00000000]            mov [INDEX],EAX
   239                                 
   240                                 
   241 000000C7 B80A000000              mov EAX,10
   242 000000CC A3[00000000]            mov [SCRATCH],EAX
   243                                 
   244                                 
   245 000000D1 68[00000000]            push INDEX
   246 000000D6 68[00000000]            push SCRATCH
   247 000000DB E8(F6FFFFFF)            call IFORM
   248 000000E0 83C408                  add ESP,4*2
   249                                 
   250                                 
   251 000000E3 68[00000000]            push OUTCH
   252 000000E8 68[00000000]            push SCRATCH
   253 000000ED E8(F6FFFFFF)            call WRITE
   254 000000F2 83C408                  add ESP,4*2
   255                                 
   256                                 
   257 000000F5 68[00000000]            push WORDS
   258 000000FA 68[00000000]            push SCRATCH
   259 000000FF E8(F6FFFFFF)            call B402A
   260 00000104 83C408                  add ESP,4*2
   261                                 
   262                                 
   263 00000107 68[00000000]            push OUTCH
   264 0000010C 68[00000000]            push SCRATCH
   265 00000111 E8(F6FFFFFF)            call WRITE
   266 00000116 83C408                  add ESP,4*2
   267                                 
   268                                 
   269 00000119 68[00000000]            push INDEX
   270 0000011E 68[00000000]            push VAL
   271 00000123 68[00000000]            push TAG
   272 00000128 E8(F6FFFFFF)            call GETS
   273 0000012D 83C40C                  add ESP,4*3
   274                                 
   275                                 
   276 00000130 68[00000000]            push VAL
   277 00000135 68[00000000]            push SCRATCH
   278 0000013A E8(F6FFFFFF)            call IFORM
   279 0000013F 83C408                  add ESP,4*2
   280                                 
   281                                 
   282 00000142 68[00000000]            push OUTCH
   283 00000147 68[00000000]            push SCRATCH
   284 0000014C E8(F6FFFFFF)            call WRITE
   285 00000151 83C408                  add ESP,4*2
   286                                 
   287                                 
   288 00000154 68[00000000]            push TAG
   289 00000159 68[00000000]            push SCRATCH
   290 0000015E E8(F6FFFFFF)            call IFORM
   291 00000163 83C408                  add ESP,4*2
   292                                 
   293                                 
   294 00000166 68[00000000]            push OUTCH
   295 0000016B 68[00000000]            push SCRATCH
   296 00000170 E8(F6FFFFFF)            call WRITE
   297 00000175 83C408                  add ESP,4*2
   298                                 
   299                                 
   300 00000178 89EC                    mov ESP,EBP
   301 0000017A 5D                      pop EBP
   302 0000017B C3                      ret
   303                                 
   304                                  end
