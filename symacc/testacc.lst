     1                                 %line 1+1 testacc.asm
     2                                 
     3                                 
     4                                 
     5                                 [global TESTACC]
     6                                 
     7                                 [global progr]
     8                                 [extern exit]
     9                                 
    10                                 [global TESTACC]
    11                                 [section .text]
    12                                 progr:
    13 00000000 55                      push EBP
    14 00000001 89E5                    mov EBP,ESP
    15 00000003 EBFE                    jmp TESTACC
    16                                 
    17                                 
    18                                 [extern LOOKS]
    19                                 [extern GETS]
    20                                 [extern PUTS]
    21                                 [extern GETWRD]
    22                                 
    23                                 [extern A2B40]
    24                                 [extern B402A]
    25                                 
    26                                 [extern READ]
    27                                 [extern WRITE]
    28                                 [extern IFORM]
    29                                 
    30                                 [extern LEX]
    31                                 [extern CAT2]
    32                                 
    33                                 
    34                                 [section .data]
    35                                 IFS:
    36 00000000 02000000                dd 2
    37 00000004 49000000                dd 73
    38 00000008 46000000                dd 70
    39                                 
    40                                 THENS:
    41 0000000C 04000000                dd 4
    42 00000010 54000000                dd 84
    43 00000014 48000000                dd 72
    44 00000018 45000000                dd 69
    45 0000001C 4E000000                dd 78
    46                                 
    47                                 ELSES:
    48 00000020 04000000                dd 4
    49 00000024 45000000                dd 69
    50 00000028 4C000000                dd 76
    51 0000002C 53000000                dd 83
    52 00000030 45000000                dd 69
    53                                 
    54                                 PROCES:
    55 00000034 09000000                dd 9
    56 00000038 50000000                dd 80
    57 0000003C 52000000                dd 82
    58 00000040 4F000000                dd 79
    59 00000044 43000000                dd 67
    60 00000048 45000000                dd 69
    61 0000004C 44000000                dd 68
    62 00000050 55000000                dd 85
    63 00000054 52000000                dd 82
    64 00000058 45000000                dd 69
    65                                 
    66                                 PROCS:
    67 0000005C 04000000                dd 4
    68 00000060 50000000                dd 80
    69 00000064 52000000                dd 82
    70 00000068 4F000000                dd 79
    71 0000006C 43000000                dd 67
    72                                 
    73                                 GREET:
    74 00000070 11000000                dd 17
    75 00000074 42000000                dd 66
    76 00000078 65000000                dd 101
    77 0000007C 67000000                dd 103
    78 00000080 69000000                dd 105
    79 00000084 6E000000                dd 110
    80 00000088 20000000                dd 32
    81 0000008C 53000000                dd 83
    82 00000090 59000000                dd 89
    83 00000094 4D000000                dd 77
    84 00000098 41000000                dd 65
    85 0000009C 43000000                dd 67
    86 000000A0 43000000                dd 67
    87 000000A4 20000000                dd 32
    88 000000A8 54000000                dd 84
    89 000000AC 65000000                dd 101
    90 000000B0 73000000                dd 115
    91 000000B4 74000000                dd 116
    92                                 
    93                                 TESTIT:
    94 000000B8 14000000                dd 20
    95 000000BC 54000000                dd 84
    96 000000C0 65000000                dd 101
    97 000000C4 73000000                dd 115
    98 000000C8 74000000                dd 116
    99 000000CC 3A000000                dd 58
   100 000000D0 20000000                dd 32
   101 000000D4 20000000                dd 32
   102 000000D8 20000000                dd 32
   103 000000DC 20000000                dd 32
   104 000000E0 20000000                dd 32
   105 000000E4 20000000                dd 32
   106 000000E8 20000000                dd 32
   107 000000EC 20000000                dd 32
   108 000000F0 20000000                dd 32
   109 000000F4 20000000                dd 32
   110 000000F8 20000000                dd 32
   111 000000FC 20000000                dd 32
   112 00000100 20000000                dd 32
   113 00000104 20000000                dd 32
   114 00000108 20000000                dd 32
   115                                 
   116                                 STAR:
   117 0000010C 2A000000                dd 42
   118                                 
   119                                 SLASH:
   120 00000110 2F000000                dd 47
   121                                 
   122                                 PLUS:
   123 00000114 2B000000                dd 43
   124                                 
   125                                 MINUS:
   126 00000118 2D000000                dd 45
   127                                 
   128                                 LPAREN:
   129 0000011C 28000000                dd 40
   130                                 
   131                                 RPAREN:
   132 00000120 29000000                dd 41
   133                                 
   134                                 OUTCH:
   135 00000124 03000000                dd 3
   136                                 
   137                                 INDEX:
   138 00000128 00000000                times 1 dd 0
   139                                 VAL:
   140 0000012C 00000000                times 1 dd 0
   141                                 TAG:
   142 00000130 00000000                times 1 dd 0
   143                                 WORDS:
   144 00000134 00000000                times 1 dd 0
   145                                 TTYPE:
   146 00000138 00000000                times 1 dd 0
   147                                 
   148                                 LIST:
   149 0000013C 00000000<rept>          times 21 dd 0
   150                                 
   151                                 SCRATCH:
   152 00000190 0A000000                dd 10
   153 00000194 20000000                dd 32
   154 00000198 20000000                dd 32
   155 0000019C 20000000                dd 32
   156 000001A0 20000000                dd 32
   157 000001A4 20000000                dd 32
   158 000001A8 20000000                dd 32
   159 000001AC 20000000                dd 32
   160 000001B0 20000000                dd 32
   161 000001B4 20000000                dd 32
   162 000001B8 20000000                dd 32
   163                                 
   164                                 
   165                                 [section .text]
   166                                 TESTACC:
   167                                 
   168                                 
   169 00000005 68[00000000]            push OUTCH
   170 0000000A 68[00000000]            push GREET
   171 0000000F E8(F6FFFFFF)            call WRITE
   172 00000014 83C408                  add ESP,4*2
   173                                 
   174                                 
   175 00000017 B807000000              mov EAX,7
   176 0000001C A3[00000000]            mov [TESTIT],EAX
   177                                 
   178                                 
   179 00000021 68[00000000]            push TESTIT
   180 00000026 68[00000000]            push IFS
   181 0000002B E8(F6FFFFFF)            call CAT2
   182 00000030 83C408                  add ESP,4*2
   183                                 
   184                                 
   185 00000033 68[00000000]            push OUTCH
   186 00000038 68[00000000]            push TESTIT
   187 0000003D E8(F6FFFFFF)            call WRITE
   188 00000042 83C408                  add ESP,4*2
   189                                 
   190                                 
   191                                 
   192 00000045 68[00000000]            push IFS
   193 0000004A E8(F6FFFFFF)            call A2B40
   194 0000004F 83C404                  add ESP,4*1
   195 00000052 A3[00000000]            mov [WORDS],EAX
   196                                 
   197                                 
   198 00000057 68[00000000]            push WORDS
   199 0000005C 68[00000000]            push SCRATCH
   200 00000061 E8(F6FFFFFF)            call IFORM
   201 00000066 83C408                  add ESP,4*2
   202                                 
   203                                 
   204 00000069 68[00000000]            push OUTCH
   205 0000006E 68[00000000]            push SCRATCH
   206 00000073 E8(F6FFFFFF)            call WRITE
   207 00000078 83C408                  add ESP,4*2
   208                                 
   209                                 
   210 0000007B B802000000              mov EAX,2
   211 00000080 A3[00000000]            mov [VAL],EAX
   212                                 
   213                                 
   214 00000085 B803000000              mov EAX,3
   215 0000008A A3[00000000]            mov [TTYPE],EAX
   216                                 
   217                                 
   218 0000008F A1[00000000]            mov EAX,[TTYPE]
   219 00000094 C1E008                  sal EAX,8
   220 00000097 A3[00000000]            mov [TAG],EAX
   221                                 
   222                                 
   223                                 
   224 0000009C 68[00000000]            push WORDS
   225 000000A1 68[00000000]            push VAL
   226 000000A6 68[00000000]            push TAG
   227 000000AB E8(F6FFFFFF)            call LOOKS
   228 000000B0 83C40C                  add ESP,4*3
   229 000000B3 A3[00000000]            mov [INDEX],EAX
   230                                 
   231                                 
   232 000000B8 B80A000000              mov EAX,10
   233 000000BD A3[00000000]            mov [SCRATCH],EAX
   234                                 
   235                                 
   236 000000C2 68[00000000]            push INDEX
   237 000000C7 68[00000000]            push SCRATCH
   238 000000CC E8(F6FFFFFF)            call IFORM
   239 000000D1 83C408                  add ESP,4*2
   240                                 
   241                                 
   242 000000D4 68[00000000]            push OUTCH
   243 000000D9 68[00000000]            push SCRATCH
   244 000000DE E8(F6FFFFFF)            call WRITE
   245 000000E3 83C408                  add ESP,4*2
   246                                 
   247                                 
   248 000000E6 68[00000000]            push WORDS
   249 000000EB 68[00000000]            push SCRATCH
   250 000000F0 E8(F6FFFFFF)            call B402A
   251 000000F5 83C408                  add ESP,4*2
   252                                 
   253                                 
   254 000000F8 68[00000000]            push OUTCH
   255 000000FD 68[00000000]            push SCRATCH
   256 00000102 E8(F6FFFFFF)            call WRITE
   257 00000107 83C408                  add ESP,4*2
   258                                 
   259                                 
   260 0000010A 89EC                    mov ESP,EBP
   261 0000010C 5D                      pop EBP
   262 0000010D C3                      ret
   263                                 
   264                                  end
